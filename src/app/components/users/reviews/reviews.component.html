<!-- Container-fluid starts-->
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <div class="card tab2-card">
                <!-- <div class="card-header">
                    <h5> Add Customer</h5>
                </div> -->
                <div class="card-body tab2-card">
                    <ngb-tabset class="tab-coupon">
                        <ngb-tab title="Create review">
                            <ng-template ngbTabContent>
                                <div class="tab-pane fade active show" id="account" role="tabpanel"
                                    aria-labelledby="account-tab">
                                    <form [formGroup]="reviewForm" (ngSubmit)="postReview()"
                                        class="needs-validation user-add" novalidate="">
                                        <!-- <h4>Account Details</h4> -->
                                        <div class="form-group row">
                                            <label  class="col-xl-3 col-md-4"><span>*</span>
                                                First Name</label>
                                            <input formControlName="displayName" class="form-control col-xl-8 col-md-7" 
                                                type="text" required="">
                                        </div>
                                        <div class="form-group row">
                                            <label  class="col-xl-3 col-md-4"><span>*</span> 
                                                Mobile</label>
                                            <input formControlName="displayMobile" class="form-control col-xl-8 col-md-7" 
                                                type="text" required="">
                                        </div>
                                        <div class="form-group row">
                                            <label  class="col-xl-3 col-md-4"><span>*</span>
                                                Ratings</label>
                                                <ng-template #t let-fill="fill">
                                                    <span class="star" [class.full]="fill === 100">
                                                    <span class="half" [style.width.%]="fill">&#9733;</span>&#9733;
                                                    </span>
                                                </ng-template>
                                                <ngb-rating formControlName="ratings" [starTemplate]="t" [(rate)]="rate" [max]="5"></ngb-rating>
                                        </div>
                                        <div class="form-group row">
                                            <label  class="col-xl-3 col-md-4"><span>*</span>
                                                Message</label>
                                            <textarea formControlName="review" class="form-control col-xl-8 col-md-7"></textarea>
                                        </div>
                                        <div class="form-group row">
                                            <label  class="col-xl-3 col-md-4"><span>*</span>
                                                Date</label>
                                            <div class="input-group col-xl-8 col-md-7">
                                                <input class="form-control" type="date" placeholder="yyyy-mm-dd"
                                                formControlName="postDate">
                                            </div>                                                
                                        </div>
                                        <div *ngIf="inputsRequired" class="text-center text-danger">All fields are required except message field</div>  
                                        <div class="text-center">
                                            <button type="submit" class="btn btn-primary">Save</button>
                                        </div>
                                    </form>
                                </div>
                            </ng-template>
                        </ngb-tab>
                        <ngb-tab title="Reviews">
                            <ng-template ngbTabContent>
                                <div class="tab-pane fade active show" id="account" role="tabpanel"
                                    aria-labelledby="account-tab">
                                    <table class="table">
                                        <thead>
                                          <tr>
                                            <th scope="col">Customer#</th>
                                            <th scope="col">Name</th>
                                            <th scope="col">Mobile</th>
                                            <th scope="col">Ratings</th>
                                            <th scope="col">Review</th>
                                            <th scope="col">Status</th>
                                            <th>Action</th>
                                          </tr>
                                        </thead>
                                        <tbody>
                                          <tr *ngFor="let r of reviews">
                                            <th scope="row">{{r.customer_id}}</th>
                                            <td>{{r.display_name}}
                                                <input *ngIf="r.editable" [(ngModel)]="r.display_name" />
                                            </td>
                                            <td>{{r.display_mobile}}
                                                <input *ngIf="r.editable" [(ngModel)]="r.display_mobile" />
                                            </td>
                                            <td>{{r.ratings}}
                                                <input *ngIf="r.editable" [(ngModel)]="r.ratings" />
                                            </td>
                                            <td>{{r.review}}
                                                <textarea *ngIf="r.editable" [(ngModel)]="r.review"></textarea>
                                            </td>
                                            <td>{{r.status}}
                                                <input *ngIf="r.editable" [(ngModel)]="r.status" />
                                            </td>
                                            <td >
                                                <span *ngIf="!r.editable" (click)="r.editable=!r.editable"><i class="fa fa-pencil"></i></span>
                                                <button *ngIf="r.editable" (click)="editReview(r)">Update</button>
                                            </td>
                                          </tr>
                                        </tbody>
                                    </table>
                                    <!-- <ng2-smart-table [settings]="settings" [source]="reviews" (editConfirm)="editReview($event)"></ng2-smart-table> -->
                                </div>
                            </ng-template>
                        </ngb-tab>
                        
                    </ngb-tabset>
                    <!-- <div class="pull-right">
                        <button type="button" class="btn btn-primary">Save</button>
                    </div> -->
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Container-fluid Ends-->