<!-- Container-fluid starts-->
<div class="container-fluid">
    <div class="row">
      <div class="col-sm-6" *ngIf="kycDetails">
        <div class="card" [routerLink]="['../../../users/kyc-list', kycDetails.id]"  [ngClass]="{'bg-dark': NoKYC,'bg-danger': kycDetails?.kyc_status=='Query raised','bg-success': kycDetails?.kyc_status=='eKYC approved', 'bg-warning': kycDetails?.kyc_status=='eKYC submitted'}" >
            <div class="card-body">
                <h2 class="text-white" *ngIf="!NoKYC">{{kycDetails?.kyc_status}}</h2>
                <h2 class="text-white" *ngIf="NoKYC">Awaiting eKYC</h2>
            </div>
        </div>
      </div>

      <div class="col-sm-6" *ngIf="!kycDetails">
        <div class="card bg-dark"  >
            <div class="card-body">
                <h2 class="text-white" *ngIf="NoKYC">Awaiting eKYC</h2>
            </div>
        </div>
      </div>

      <div class="col-sm-6"></div>
        
      <div class="col-sm-6">
          <div class="card">
              <div class="card-body">
                  <div class="custom-datatable" *ngFor="let o of filteredCustomers">
                      
                      <div class="my-2">Customer #: <span>{{o.customer_id}}</span></div>
                      <div class="my-2">First name : <span>{{o.firstName}} </span> <span class="text-primary" (click)="fname=!fname"> <i class="fa fa-pencil"></i></span> 
                        <div class="input-group mb-3" *ngIf="fname">
                          <input type="text" class="form-control" [(ngModel)]="o.firstName" aria-describedby="basic-addon1">
                          <div class="input-group-append">
                            <span class="input-group-text" id="basic-addon1" (click)="updateCustomer(o.customer_id,o.firstName, 'firstName')">Update</span>
                          </div>
                        </div>
                      </div>
                      <div class="my-2">Last name : <span>{{o.lastName}} </span> <span class="text-primary" (click)="lname=!lname"> <i class="fa fa-pencil"></i></span>
                        <div class="input-group mb-3" *ngIf="lname">
                          <input type="text" class="form-control" [(ngModel)]="o.lastName" aria-describedby="basic-addon2">
                          <div class="input-group-append">
                            <span class="input-group-text" id="basic-addon2" (click)="updateCustomer(o.customer_id,o.lastName, 'lastName')">Update</span>
                          </div>
                        </div>
                      </div>
                      <div class="my-2">Mobile : <span>{{o.mobile}} </span></div>
                      <div class="my-2">Email : <span>{{o.email}} </span><span class="text-primary" (click)="eemail=!eemail"> <i class="fa fa-pencil"></i></span> 
                        <div class="input-group mb-3" *ngIf="eemail">
                          <input type="text" class="form-control" [(ngModel)]="o.email" aria-describedby="basic-addon3">
                          <div class="input-group-append">
                            <span class="input-group-text" id="basic-addon3" (click)="updateCustomer(o.customer_id,o.email, 'email')">Update</span>
                          </div>
                        </div>
                      </div>
                      
                  </div>
              </div>
          </div>
      </div>

      <div class="col-sm-6">
        <div class="card">
            <div class="card-body">
                <div class="custom-datatable" *ngFor="let a of defaultAddress">
                    
                    <p>Name : <span>{{a.display_name}} ({{a.nickName}})</span></p>
                    <p>First name : <span>{{a.firstName}}</span></p>
                    <p>Address : <span>{{a.address_line1}} {{a.address_line2}}, {{a.landmark}}, {{a.city}}-{{a.pincode}}</span></p>
                    <p>Landmark : <span></span></p>
                    <p>Mobile : <span>{{a.addressMobile}}</span></p>
                    <p>Email : <span>{{a.email}}</span></p>
                    <a class="text-primary" (click)="open()">click here to view all address</a>
                </div>
            </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="card">
          <div class="card-header">
              <h3>Cart details</h3>
          </div>
            <div class="card-body">
                <button class="btn btn-warning" (click)="openProdModal()">Add product to cart</button><br><br>
                <div class="custom-datatable">                        
                    <table class="table table-striped table-bordered" >
                      <thead>
                        <tr>
                          <th>Product Id</th>
                          <th>Product name</th>
                          <th>securityDeposit</th>
                          <th>Quantity</th>
                          <th>Tenure period</th>
                          <th>Tenure price</th>
                          <th>Action</th>
                        </tr>
                      </thead>
                      <tbody *ngFor="let c of cartDetails">
                        <tr >
                          <td>{{c.product_id}}</td>
                          <td>{{c.prod_name}}</td>
                          <td>{{c.securityDeposit * c.quantity}} <input class="form-control w-100" [(ngModel)]="c.securityDeposit" (keyup)="updateCartTenurePrice(c)"></td> 
                          <td><input [(ngModel)]="c.quantity" (keyup)="updateCartQuantity(c, c.quantity)"></td>  
                          <td>
                            <a (click)="openTenureModal(tenure, c.priority, c.tenure_id, c.tenure_base_price, c)">
                              {{ c.tenures }} 
                            </a>
                            <!-- The Modal -->
                          <ng-template class="modal-tenure" #tenure let-c="close" let-d="dismiss">
                            <!-- Modal Header -->
                            <div class="modal-header">
                              <h3 class="ml-2">Select Minimum Tenure</h3>
                              <div class="my-close" (click)="d('Cross click')">
                                x
                              </div>
                            </div>

                            <!-- Modal body -->
                            <div class="modal-body">
                                <!-- <h6>{{product.prod_name}}</h6> -->
                                <table class="table">
                                    <thead>
                                    <tr class="my-table-ml">
                                        <th class="pl-5">Tenure</th>
                                        <th class="text-right">Rent/ Mo</th>
                                    </tr>
                                    </thead>
                                    <tbody *ngFor="let tenure of tenuresOfProduct; let i=index">
                                    <tr>
                                        <td>
                                            <div class="radio-item">
                                                <input type="radio" [checked]="tenure.isSelected==1" id="tenure{{tenure.tenure}}" name="tenure" (change)="calcPrice(tenure.discount, security_deposit, tenure.tenure +' '+tenure.tenure_period, tenure.tenure_id, c.tenure_base_price,c, c.quantity);d('Cross click')" value="{{tenure.tenure}}"> 
                                                <label for="tenure{{tenure.tenure}}"><span class="ml-2">{{tenure.tenure}} {{tenure.tenure_period}}</span></label>
                                            </div>
                                        </td>
                                        <td class="pull-right" for="tenure">
                                          <label for="tenure{{tenure.tenure}}">
                                            â‚¹ {{calcTenures2(tenure.discount, c.tenure_base_price)}} 
                                          </label>                                                
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>                                                                  
                            </div>

                          </ng-template> 
                          </td> 
                          <td>{{c.tenure_price * c.quantity}}
                            <br> <input class="form-control w-100" [(ngModel)]="c.tenure_price" (keyup)="updateCartTenurePrice(c)">
                          </td>
                          <td><a (click)="removeCartItem(c)"><i class="fa fa-trash"></i></a></td>  
                                            
                        </tr>                          
                      </tbody>
                    </table>
                </div>
            </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="card">
            <div class="card-header">
                <h3>Order details</h3>
            </div>
            <div class="card-body">
                <div class="custom-datatable">                        
                    <table class="table table-striped table-bordered" >
                      <thead>
                        <tr>
                          <th>Order Id</th>
                          <th>Order type</th>
                          <th>Order date</th>
                          <th>Transaction value</th>
                          <th>Payment status</th>
                          <th>Delivery status</th>
                          <th>Order status</th>
                        </tr>
                      </thead>
                      <tbody *ngFor="let o of orders">
                        <tr [routerLink]="['../../../sales/orders',o.id]">
                          <td>{{o.order_id}}</td>
                          <td>{{o.order_type}}</td>
                          <td>{{o.createdAt | date:'dd MM yyyy'}}</td> 
                          <td *ngIf="o.order_type!='Return order'">â‚¹ {{o.grandTotal}}</td>  
                          <td *ngIf="o.order_type=='Return order'">â‚¹{{o.orderItem[0].security_deposit-(o.orderItem[0].damage_charges+o.orderItem[0].earlyReturnCharges)}}</td>
                          <td>{{o.paymentStatus}}</td> 
                          <td>{{o.delivery_status}}</td>  
                          <td *ngIf="o.orderStatusId==0" class="text-center"><i class="fa fa-circle text-danger"></i></td>  
                          <td *ngIf="o.orderStatusId==1" class="text-center"><i class="fa fa-circle text-success"></i></td>                     
                        </tr>                          
                      </tbody>
                    </table>
                </div>
            </div>
        </div>
      </div>
      <div class="col-sm-12">
        <div class="card">
            <div class="card-body">
                <div class="custom-datatable">
                    
                  <!-- <table class="table table-striped table-bordered" >
                    <thead>
                      <tr>
                        <th>Product Id</th>
                        <th>Product name</th>
                        <th>Asset #</th>
                        <th>Security deposit</th>
                        <th>Tenure period</th>
                        <th>Tenure price</th>
                        <th>Damage protection</th>
                        <th>Delivery status</th>
                        <th>overdue</th>
                        <th>Start date</th>
                        <th>End date</th>
                      </tr>
                    </thead>
                    <tbody *ngFor="let o of orderItems">
                      <tr >
                        <td>{{o.prod_id}}</td>
                        <td>{{o.prod_name}}</td>
                        <td>{{o.asset_id}}</td>
                        <td>â‚¹ {{o.security_deposit}}</td>  
                        <td>{{o.tenure_period}}</td> 
                        <td>{{o.tenure_price}}</td>  
                        <td>{{o.damage_protection}}</td>  
                        <td>{{o.delivery_status}}</td>
                        <td *ngIf="o.overdue==0" class="text-center"><i class="fa fa-circle text-danger"></i></td>  
                        <td *ngIf="o.overdue==1" class="text-center"><i class="fa fa-circle text-success"></i></td>                     
                        <td>{{o.startDate | date:'dd MM yyyy'}}</td> 
                        <td>{{o.endDate | date:'dd MM yyyy'}}</td> 
                      </tr>                          
                    </tbody>
                  </table> -->

                  
                  <p-table #dt2  styleClass="p-datatable-gridlines" selectionMode="multiple" [(selection)]="selectedOrders" [exportHeader]="'customExportHeader'" [value]="orderItems" [lazy]="false" responsiveLayout="scroll" dataKey="id"                            
                       [showCurrentPageReport]="true"   [rows]="300" [loading]="loading" [globalFilterFields]="['firstName', 'notes', 'order_id']">
                      <ng-template pTemplate="caption">
                        <div class="p-d-flex">
                          <span class="p-input-icon-left p-ml-auto">
                                    <!-- <i class="pi pi-search"></i> -->
                                    <input class="w-100" pInputText type="text" (input)="dt2.filterGlobal($event.target.value, 'contains')" placeholder="Search keyword" />
                                </span>
                        </div>
                      </ng-template>
                      <ng-template pTemplate="header">
                        <tr>
                          <th>
                            <div class="flex justify-content-center align-items-center">
                              Product#
                                <p-columnFilter type="text" field="prod_id" display="menu"></p-columnFilter>
                                <th pSortableColumn="prod_id"><p-sortIcon field="prod_id"></p-sortIcon></th>
                            </div>
                          </th>
                          <th>
                            <div class="flex justify-content-center align-items-center">
                              Product name
                                <p-columnFilter type="text" field="prod_name" display="menu"></p-columnFilter>
                                <th pSortableColumn="prod_name"><p-sortIcon field="prod_name"></p-sortIcon></th>
                            </div>
                          </th>
                          <th>
                            <div class="flex justify-content-center align-items-center">
                              Asset#
                                <p-columnFilter type="text" field="asset_id" display="menu"></p-columnFilter>
                                <th pSortableColumn="asset_id"><p-sortIcon field="asset_id"></p-sortIcon></th>
                            </div>
                          </th>
                          <th>
                            <div class="flex justify-content-center align-items-center">
                              Security deposit
                                <p-columnFilter type="numeric" field="security_deposit" display="menu" currency="INR"></p-columnFilter>
                            </div>
                          </th>

                          <th>
                            <div class="flex justify-content-center align-items-center">
                              Tenure period
                                <p-columnFilter type="text" field="tenure_period" display="menu"></p-columnFilter>
                                <th pSortableColumn="tenure_period"><p-sortIcon field="tenure_period"></p-sortIcon></th>
                            </div>
                          </th>

                          <th>
                            <div class="flex justify-content-center align-items-center">
                              Rent / Mo
                                <p-columnFilter type="numeric" field="tenure_price" display="menu" currency="INR"></p-columnFilter>
                            </div>
                          </th>

                          <th>
                            <div class="flex justify-content-center align-items-center">
                              Damage protection
                                <p-columnFilter type="numeric" field="damage_protection" display="menu" currency="INR"></p-columnFilter>
                            </div>
                          </th>

                          <th>
                            <div class="flex justify-content-center align-items-center">
                              Dellivery status
                                <p-columnFilter type="text" field="delivery_status" display="menu"></p-columnFilter>
                                <th pSortableColumn="delivery_status"><p-sortIcon field="delivery_status"></p-sortIcon></th>
                            </div>
                          </th>

                          <!-- <th>
                            <div class="flex justify-content-center align-items-center">
                              Overdue
                                <p-columnFilter type="boolean" field="overdue" display="menu" ></p-columnFilter>
                            </div>
                          </th> -->

                          
                          <th>
                            <div class="flex justify-content-center align-items-center">
                              Start date
                                <p-columnFilter type="date" field="startDate" display="menu"></p-columnFilter>
                                <th pSortableColumn="startDate"><p-sortIcon field="startDate"></p-sortIcon></th>
                            </div>
                          </th>
                          
                        </tr>
                      </ng-template>
                      <ng-template pTemplate="body" let-o>
                          <tr>
                            <td>{{o.prod_id}}</td>
                            <td>{{o.prod_name}}</td>
                            <td>{{o.asset_id}}</td>
                            <td>â‚¹ {{o.security_deposit}}</td>  
                            <td>{{o.tenure_period}}</td> 
                            <td>{{o.tenure_price}}</td>  
                            <td>{{o.damage_protection}}</td>  
                            <td>{{o.delivery_status}}</td>
                            <!-- <td *ngIf="o.overdue==0" class="text-center"><i class="fa fa-circle text-danger"></i></td>  
                            <td *ngIf="o.overdue==1" class="text-center"><i class="fa fa-circle text-success"></i></td>                      -->
                            <td>{{o.startDate | date:'dd MM yyyy'}}</td> 
                          </tr>
                      </ng-template>
                  </p-table>
              
                </div>
            </div>
        </div>
      </div>

      <div class="col-sm-12">
        <div class="card">
            <div class="card-body">
                <div class="custom-datatable">
                    
                  <!-- <table class="table table-striped table-bordered" >
                    <thead>
                      <tr>
                        <th>Name</th>
                        <th>Comment</th>
                        <th>Order#</th>
                        <th>Date</th>
                      </tr>
                    </thead>
                    <tbody *ngFor="let o of Notes">
                      <tr >
                        <td>{{o.firstName}}</td>
                        <td>{{o.notes}}</td>
                        <td *ngIf="o.order_id!=0">{{o.order_id}}</td>
                        <td *ngIf="o.order_id==0">-</td>
                        <td>â‚¹ {{o.created_at | date: 'dd MM yyyy HH:mm'}}</td>  
                      </tr>                          
                    </tbody>
                  </table> -->

                  <p-table #dt1 [columns]="cols" styleClass="p-datatable-gridlines" selectionMode="multiple" [(selection)]="selectedOrders" [exportHeader]="'customExportHeader'" [value]="Notes" [lazy]="false" responsiveLayout="scroll" dataKey="id"                            
                      [paginator]="true" [showCurrentPageReport]="true" [rowsPerPageOptions]="[30,50,100]" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" [rows]="30" [totalRecords]="totalRecords" [loading]="loading" [globalFilterFields]="['firstName', 'notes', 'order_id']">
                      <ng-template pTemplate="caption">
                        <div class="p-d-flex">
                          <span class="p-input-icon-left p-ml-auto">
                                    <!-- <i class="pi pi-search"></i> -->
                                    <input class="w-100" pInputText type="text" (input)="dt1.filterGlobal($event.target.value, 'contains')" placeholder="Search keyword" />
                                </span>
                        </div>
                        <div class="flex">
                          <button type="button" pButton pRipple icon="pi pi-file-excel" (click)="exportAsXLSX()" class="p-button-success mr-2"  pTooltip="XLS" tooltipPosition="bottom">XL</button>
                          <button type="button" class="btn btn-secondary" (click)="openCommentModal()">Add comment</button>
                        </div>
                      </ng-template>
                      <ng-template pTemplate="header">
                        <tr>
                          <th>
                            <div class="flex justify-content-center align-items-center">
                              Name
                                <p-columnFilter type="text" field="firstName" display="menu"></p-columnFilter>
                                <th pSortableColumn="firstName"><p-sortIcon field="firstName"></p-sortIcon></th>
                            </div>
                          </th>
                          <th>
                            <div class="flex justify-content-center align-items-center">
                              Notes
                                <p-columnFilter type="text" field="notes" display="menu"></p-columnFilter>
                            </div>
                          </th>
                          <th>
                            <div class="flex justify-content-center align-items-center">
                              Order#
                                <p-columnFilter type="text" field="order_id" display="menu"></p-columnFilter>
                            </div>
                          </th>
                          
                          <th>
                            <div class="flex justify-content-center align-items-center">
                              Created at
                                <p-columnFilter type="date" field="created_at" display="menu"></p-columnFilter>
                                <th pSortableColumn="created_at"><p-sortIcon field="created_at"></p-sortIcon></th>
                            </div>
                          </th>
                          
                        </tr>
                      </ng-template>
                      <ng-template pTemplate="body" let-o>
                          <tr [routerLink]="['../orders',o.id]">
                            <td>{{o.firstName}}</td>
                            <td>{{o.notes}}</td>
                            <td *ngIf="o.order_id!=0">{{o.order_id}}</td>
                            <td *ngIf="o.order_id==0">-</td>
                            <td> {{o.created_at | date: 'dd MM yyyy HH:mm'}}</td>  
                          </tr>
                      </ng-template>
                  </p-table>
        
                </div>
            </div>
        </div>
      </div>


      <div class="col-sm-12">
        <div class="card">
            <div class="card-body">
                <div class="custom-datatable">
                    
                  <table class="table table-striped table-bordered" >
                    <thead>
                      <tr>
                        <th>Log Id</th>
                        <th>Date</th>
                        <th>Event</th>
                        <th>Description</th>
                      </tr>
                    </thead>
                    <tbody >
                      <tr *ngFor="let c of customerLogs">
                        <td>{{c.id}}</td>
                        <td >{{c.transactionDate | date: 'dd MM yyyy hh:mm'}}</td>                        
                        <td>{{c.eventName}}</td>
                        <td>{{c.transactionDescription}}</td>
                      </tr>                          
                    </tbody>
                  </table>
              
                </div>
            </div>
        </div>
      </div>

        
      </div>
</div> 
    <!-- Container-fluid Ends -->


        <!-- Address modal -->
        <ng-template  #addressModal let-c="close" let-d="dismiss">
          <div class="modal-header text-center">
            <h4 class="col-12 modal-title text-center" id="modal-basic-title">Order details</h4>
            <button type="button" class="close" aria-label="Close" (click)="d(); ">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
              <div class="row">  
                <div class="col-sm-6" *ngFor="let a of address">
                  <div class="card">
                      <div class="card-body">
                          <div class="custom-datatable" >
                              
                              <div class="p-0 m-0">Display name : <span>{{a.display_name}} </span><span class="text-primary" (click)="displayName=!displayName"> <i class="fa fa-pencil"></i></span>
                                <div class="input-group mb-3" *ngIf="displayName">
                                  <input type="text" class="form-control" [(ngModel)]="a.display_name" aria-describedby="basic-addon1">
                                  <div class="input-group-append">
                                    <span class="input-group-text" id="basic-addon1" (click)="updateCustomerAddressFeild(a.address_id,a.display_name, 'display_name')">Update</span>
                                  </div>
                                </div>
                              </div>
                              <div class="p-0 m-0">Nick Name: ({{a.nickName}}) <span class="text-primary" (click)="nickName=!nickName"> <i class="fa fa-pencil"></i></span>
                                <div class="input-group mb-3" *ngIf="nickName">
                                  <input type="text" class="form-control" [(ngModel)]="a.nickName" aria-describedby="basic-addon1">
                                  <div class="input-group-append">
                                    <span class="input-group-text" id="basic-addon1" (click)="updateCustomerAddressFeild(a.address_id,a.nickName, 'nickName')">Update</span>
                                  </div>
                                </div>
                              </div>
                              <div class="p-0 m-0">First name : <span>{{a.firstName}}</span></div>
                              <div class="p-0 m-0">Address line 1 : <span>{{a.address_line1}}</span><span class="text-primary" (click)="address1=!address1"> <i class="fa fa-pencil"></i></span>
                                <div class="input-group mb-3" *ngIf="address1">
                                  <input type="text" class="form-control" [(ngModel)]="a.address_line1" aria-describedby="basic-addon1">
                                  <div class="input-group-append">
                                    <span class="input-group-text" id="basic-addon1" (click)="updateCustomerAddressFeild(a.address_id,a.address_line1, 'address_line1')">Update</span>
                                  </div>
                                </div>
                              </div>
                              <div class="p-0 m-0">Addresss line 2: <span>{{a.address_line2}} </span><span class="text-primary" (click)="address2=!address2"> <i class="fa fa-pencil"></i></span>
                                <div class="input-group mb-3" *ngIf="address2">
                                  <input type="text" class="form-control" [(ngModel)]="a.address_line2" aria-describedby="basic-addon1">
                                  <div class="input-group-append">
                                    <span class="input-group-text" id="basic-addon1" (click)="updateCustomerAddressFeild(a.address_id,a.address_line2, 'address_line2')">Update</span>
                                  </div>
                                </div>
                              </div>
                              <div class="p-0 m-0">city <span>{{a.city}} </span><span class="text-primary" (click)="city=!city"> <i class="fa fa-pencil"></i></span>
                                <div class="input-group mb-3" *ngIf="city">
                                  <input type="text" class="form-control" [(ngModel)]="a.city" aria-describedby="basic-addon1">
                                  <div class="input-group-append">
                                    <span class="input-group-text" id="basic-addon1" (click)="updateCustomerAddressFeild(a.address_id,a.city, 'city')">Update</span>
                                  </div>
                                </div>
                              </div>
                              <div class="p-0 m-0">pincode: <span>{{a.pincode}} </span><span class="text-primary" (click)="pincode=!pincode"> <i class="fa fa-pencil"></i></span>
                                <div class="input-group mb-3" *ngIf="pincode">
                                  <input type="text" class="form-control" [(ngModel)]="a.pincode" aria-describedby="basic-addon1">
                                  <div class="input-group-append">
                                    <span class="input-group-text" id="basic-addon1" (click)="updateCustomerAddressFeild(a.address_id,a.pincode, 'pincode')">Update</span>
                                  </div>
                                </div>
                              </div>
                              <div class="p-0 m-0">Landmark : <span>{{a.landmark}} </span><span class="text-primary" (click)="landmark=!landmark"> <i class="fa fa-pencil"></i></span>
                                <div class="input-group mb-3" *ngIf="landmark">
                                  <input type="text" class="form-control" [(ngModel)]="a.landmark" aria-describedby="basic-addon1">
                                  <div class="input-group-append">
                                    <span class="input-group-text" id="basic-addon1" (click)="updateCustomerAddressFeild(a.address_id,a.landmark, 'landmark')">Update</span>
                                  </div>
                                </div>
                              </div>
                              <div class="p-0 m-0">Mobile : <span>{{a.addressMobile}} </span><span class="text-primary" (click)="mobile=!mobile"> <i class="fa fa-pencil"></i></span>
                                <div class="input-group mb-3" *ngIf="mobile">
                                  <input type="text" class="form-control" [(ngModel)]="a.addressMobile" aria-describedby="basic-addon1">
                                  <div class="input-group-append">
                                    <span class="input-group-text" id="basic-addon1" (click)="updateCustomerAddressFeild(a.address_id,a.addressMobile, 'addressMobile')">Update</span>
                                  </div>
                                </div>
                              </div>
                              <div class="p-0 m-0">Email : <span>{{a.email}}</span></div>
                        
                          </div>
                      </div>
                  </div>
                </div>
              </div>
          </div>
      </ng-template>

      <!-- Replacement request modal -->
      <ng-template  #prodModal let-c="close" let-d="dismiss">
          <div class="modal-header text-center">
            <h4 class="col-12 modal-title text-center" id="modal-basic-title">Product details</h4>
            <button type="button" class="close" aria-label="Close" (click)="d(); ">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
              <div class="row">  
                <div class="col-sm-6">
                  <div class="card">
                      <div class="card-body">
                        <ng-multiselect-dropdown class="mx-5"
                        [placeholder]="'Add products'"
                        [settings]="dropdownSettings"
                        [data]="cartProducts"
                        (onSelect)="onItemSelect($event)"
                        (onDeSelect)="onItemDeSelect($event)"
                        >
                        </ng-multiselect-dropdown>
                      </div>
                  </div>
                </div>
                <!-- <div class="col-sm-12">
                  <div class="card">
                    <div class="card-body">
                      <table class="table table-striped table-bordered" >
                        <thead>
                          <tr>
                            <th>Product Id</th>
                            <th>Product name</th>
                            <th>securityDeposit</th>
                            <th>Quantity</th>
                            <th>Tenure period</th>
                            <th>Tenure price</th>
                            <th>Action</th>
                          </tr>
                        </thead>
                        <tbody >
                          <tr *ngFor="let c of cartDetails">
                            <td>{{c.product_id}}</td>
                            <td>{{c.prod_name}}</td>
                            <td>{{c.securityDeposit}}</td> 
                            <td>{{c.quantity}}</td>  
                            <td>{{c.tenures}}</td> 
                            <td>{{c.tenure_price}}</td>
                            <td><a><i class="fa fa-trash"></i></a></td>                    
                          </tr>                          
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div> -->
              </div>
          </div>
      </ng-template>


      <ng-template  #commentModal let-c="close" let-d="dismiss">
        <div class="modal-header text-center">
          <h4 class="col-12 modal-title text-center" id="modal-basic-title">Add comment</h4>
          <button type="button" class="close" aria-label="Close" (click)="d(); ">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            <div class="row">  
              <div class="col-sm-12">
                <div class="card">
                    <div class="card-body">
                      <textarea class="form-control" rows="5" [(ngModel)]="comment"></textarea>
                      <button class="btn btn-warning mt-2" (click)="postNotes();d();">Submit</button>
                    </div>
                </div>
              </div>
            </div>
        </div>
    </ng-template>

      

    